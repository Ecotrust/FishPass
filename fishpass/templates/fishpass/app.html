{% extends "fishpass/base.html" %}
{% load static %}

{% block site_style %}
    {{ block.super }}
    <!-- <link rel="stylesheet" href="{% static 'fishpass/lib/pageguide/css/pageguide.min.css' %}"/> -->
    <!-- <link rel="stylesheet" href="{% static 'fishpass/css/fishpass_pageguide.css' %}"/> -->

    <!-- <link rel="stylesheet" href="{% static 'fishpass/css/ol.css' %}" media="screen,projection"/> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/openlayers/4.6.5/ol.css" media="screen,projection"/>
    <link rel="stylesheet" href="{% static 'fishpass/lib/ol-layerswitcher/src/ol-layerswitcher.css' %}"/>
    <!-- <link rel="stylesheet" href="{% static 'fishpass/css/billboard.min.css' %}" /> -->

    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.0.1/css/font-awesome.min.css">

    <link rel="stylesheet" href="{% static 'fishpass/lib/ol-ext/dist/ol-ext.min.css' %}" type="text/css">

    <link rel="stylesheet" href="{% static 'visualize/css/ol4_settings.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'visualize/css/map_popup.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'scenarios/css/scenarios_form.css' %}" type="text/css">

    <link rel="stylesheet" href="{% static 'fishpass/css/app.css' %}"/>
    <link rel="stylesheet" href="{% static 'fishpass/css/_40-app.css' %}"/>
    <link rel="stylesheet" href="{% static 'fishpass/css/_64-app.css' %}"/>
    <link rel="stylesheet" href="{% static 'fishpass/css/_90-app.css' %}"/>

    <link rel="stylesheet" href="{% static 'fishpass/css/scenario_form.css' %}"/>
    <link rel="stylesheet" href="{% static 'fishpass/css/modals.css' %}"/>

{% endblock site_style %}

{% block js_head %}
    <script src="{% static 'fishpass/lib/jquery-3.2.1.min.js' %}"></script>
    <!-- <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
{% endblock js_head %}

{% block header %}
{% endblock header %}


{% block content %}
    <section class="map-wrap">
        <!-- <div class="overlay">
            <div class="instructions d-flex justify-content-center">
                <h2 class="mx-auto w-80 text-center">Start by deciding how you want<br/>to interact with the map.</h2>
                <div id="collapsable-help-wrap" class="text-center mx-auto mt-4 w-50">
                  <a class="w80 mx-auto" data-toggle="collapse" role="button" href="#collapsableHelp" aria-expanded="false" aria-controls="collapsableHelp">Can't decide?</a>
                  <div class="collapse" id="collapsableHelp">
                    <div class="card card-body text-left">
                      <p>
                        <strong>Select Stream Segment</strong>
                        <br />
                        Choose a part of the river system to affect stream flows from actions of forest management
                      </p>
                      <p>
                          <strong>Filter Forest Regions</strong>
                          <br />
                          Identify which forest area you would like to treat to improve downstream streamflow
                      </p>
                      <p>
                          <strong>Draw Treatment Area</strong>
                          <br />
                          Specifically identify the exact forested areas you plan to treat
                      </p>
                    </div>
                  </div>
                </div>
                <div class="d-flex hvh">&nbsp;</div>
                <div id="instruction" class="d-flex align-self-center justify-content-center"></div>
            </div>
        </div> -->
        <div id="map"></div>
        <div id="popup" class="ol-popup">
          <a href="#" id="popup-closer" class="ol-popup-closer" title="close popup"></a>
          <div id="popup-content"></div>
        </div>
        <div id="panel" class="panel">
            <!-- <div class="loading-animation">
                <div class="animation"></div>
            </div> -->
            <div id="panel-content" class="panel-content panel_inner">
              <!-- <div id="draw_form"></div> -->
              <div id="scenarios"></div>
              <div id="scenario_form"></div>
              <div id="results"></div>
            </div>
        </div>
    </section>

    {% include 'fishpass/modals.html' %}

{% endblock %}

{% block footer %}
{% endblock %}

{% block extra_js %}
    {{ block.super }}
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>
    <script src="https://openlayers.org/en/v4.6.4/examples/resources/mapbox-streets-v6-style.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/2.1.0/knockout-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout.mapping/2.3.2/knockout.mapping.js"></script>
    <script src="{% static 'js/knockout-bindings.js' %}"></script>

    <!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->
    <!-- <script src="{% static 'fishpass/lib/billboard.min.js' %}"></script> -->

    <!-- <script src="{% static 'fishpass/lib/pageguide/js/pageguide.min.js' %}"></script> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/openlayers/4.6.5/ol.js"></script>
    <!-- <script src="{% static 'fishpass/lib/ol.js' %}"></script> -->
    <!-- <script src="{% static 'fishpass/lib/ol-debug.js' %}"></script> -->
    <script src="{% static 'fishpass/lib/ol-layerswitcher/dist/ol-layerswitcher.js' %}"></script>
    <script src="{% static 'fishpass/js/app.js' %}"></script>

    <script src="{% static 'visualize/js/' %}{{ MAP_TECH }}_settings.js"></script>
    <script src="{% static 'scenarios/js/' %}{{ MAP_TECH }}_settings.js"></script>

    <script src="{% static 'fishpass/js/state.js' %}"></script>
    <script src="{% static 'fishpass/js/modals.js' %}"></script>

    <script>
      app.mapbox = {
          key: '{{ MAPBOX_TOKEN }}'
      };
      app.here = {
        key: '{{ HERE_TOKEN }}',
        appCode: '{{ HERE_APP_CODE }}',
      }
    </script>
    <script src="{% static 'fishpass/js/map.js' %}"></script>
    <script src="{% static 'fishpass/js/selection.js' %}"></script>
    <!-- <script src="{% static 'fishpass/js/app.events.js' %}"></script> -->
    <!-- <script src="{% static 'fishpass/js/visualization.js' %}"></script> -->
    <!-- <script src="{% static 'fishpass/lib/geosearch.js' %}"></script> -->

    <script src="{% static 'scenarios/js/models.js' %}"></script>
    <script src="{% static 'fishpass/js/scenarios.js' %}"></script>

    <script src="{% static 'fishpass/lib/ol-ext/dist/ol-ext.min.js' %}"></script>

    <script
      src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
      integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
      crossorigin="anonymous"></script>
    <script src="{% static 'fishpass/js/init.js' %}"></script>
{% endblock extra_js %}
